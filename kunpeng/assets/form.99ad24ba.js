var X=Object.defineProperty;var A=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var D=(o,u,a)=>u in o?X(o,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[u]=a,V=(o,u)=>{for(var a in u||(u={}))q.call(u,a)&&D(o,a,u[a]);if(A)for(var a of A(u))G.call(u,a)&&D(o,a,u[a]);return o};var k=(o,u,a)=>new Promise((p,l)=>{var e=d=>{try{i(a.next(d))}catch(f){l(f)}},h=d=>{try{i(a.throw(d))}catch(f){l(f)}},i=d=>d.done?p(d.value):Promise.resolve(d.value).then(e,h);i((a=a.apply(o,u)).next())});import{p as J}from"./index.ea60a1e6.js";import{d as S,y as I,e as C,o as c,c as g,Q as s,X as b,bI as U,u as t,R as r,a as j,F,r as T,bH as W,$ as M,a$ as Y,i as Z,j as K,bo as x,be as E,t as ee,V as N,aS as ae,aR as te,af as ue,c2 as ne,a_ as le,ad as oe,ae as se}from"./vendor.192340e4.js";const de={class:"flex-wrap flex overflow-y-auto bg-white p-4"},re=["onClick"],pe=S({props:{modelValue:null},emits:["update:modelValue"],setup(o,{emit:u}){const a=o,p=Object.entries(I),l=C(!1);function e(h){u("update:modelValue",h)}return(h,i)=>{const d=M,f=Y;return c(),g(F,null,[s(d,{value:a.modelValue,"onUpdate:modelValue":e,onClick:i[0]||(i[0]=m=>l.value=!l.value),disabled:!0,class:"relative"},null,8,["value"]),(c(),b(U(t(I)[a.modelValue||"DatabaseOutlined"]),{class:"w-8 h-8 m-1 border"})),s(f,{show:l.value,"onUpdate:show":i[1]||(i[1]=m=>l.value=m)},{default:r(()=>[j("div",de,[(c(!0),g(F,null,T(t(p),m=>(c(),g("div",{key:m[0],class:"w-8 h-8 m-1 border hover:bg-green-300",style:W({background:m[0]===a.modelValue?"#15a1935f":""}),onClick:()=>{l.value=!1,e(m[0])}},[(c(),b(U(m[1])))],12,re))),128))])]),_:1},8,["show"])],64)}}});function B(o,u,a="key",p="children"){for(const l of o){if(l[a]===u)return l;if(l[p]&&l[p].length){const e=B(l[p],u,a,p);if(e)return e}}}const _e={class:"flex justify-end"},ie=E("\u521B\u5EFA"),ce=E("\u66F4\u65B0"),be=S({props:{modelValue:null,mode:null},setup(o){const u=o,a=J(),p=a.allAuthNodeTree,l=[{value:0,label:"\u76EE\u5F55"},{value:1,label:"\u83DC\u5355"},{value:2,label:"\u64CD\u4F5C"}],e=Z(u.modelValue);function h(w){e.parentId=w}const i=[{value:0,name:"\u521B\u5EFA"},{value:1,name:"\u4FEE\u6539"},{value:2,name:"\u67E5\u770B"}],d=K(()=>i.find(w=>w.value===u.mode)||i[0]),f=C(B(p,e.parentId,"id","children")),m=C(0);x(()=>e.parentId,()=>{f.value=B(p,e.parentId,"id","children"),m.value++}),x(()=>e.type,w=>{w===0&&(e.parentId=-1)},{immediate:!0});function O(){return k(this,null,function*(){yield a.createAuth(V({},e)).then(()=>{window.$message.success("\u6210\u529F")}).catch(()=>window.$message.error("\u5931\u8D25"))})}function P(){return k(this,null,function*(){yield a.updateAuth(V({},e)).then(()=>{window.$message.success("\u6210\u529F")}).catch(()=>window.$message.error("\u5931\u8D25"))})}return(w,_)=>{const R=ae,z=te,v=ue,y=M,H=ne,L=le,$=oe,Q=se;return c(),b(Q,{"label-placement":"left",model:t(e),"label-width":"auto",disabled:t(d).value===2},{default:r(()=>[s(v,{path:"type",label:"\u8282\u70B9\u7C7B\u578B"},{default:r(()=>[s(z,{value:t(e).type,"onUpdate:value":_[0]||(_[0]=n=>t(e).type=n),name:"\u7C7B\u578B",disabled:t(d).value!==0},{default:r(()=>[(c(),g(F,null,T(l,n=>s(R,{key:n.value,value:n.value},{default:r(()=>[E(ee(n.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["value","disabled"])]),_:1}),s(v,{path:"perms",label:"\u6388\u6743\u6807\u8BC6"},{default:r(()=>[s(y,{value:t(e).perms,"onUpdate:value":_[1]||(_[1]=n=>t(e).perms=n)},null,8,["value"])]),_:1}),s(v,{path:"name",label:"\u540D\u79F0"},{default:r(()=>[s(y,{value:t(e).name,"onUpdate:value":_[2]||(_[2]=n=>t(e).name=n)},null,8,["value"])]),_:1}),[0,1].includes(t(e).type)?(c(),b(v,{key:0,path:"path",label:"\u8DEF\u7531"},{default:r(()=>[s(y,{value:t(e).path,"onUpdate:value":_[3]||(_[3]=n=>t(e).path=n)},null,8,["value"])]),_:1})):N("",!0),s(v,{path:"parentId",label:"\u4E0A\u7EA7\u83DC\u5355"},{default:r(()=>{var n;return[(c(),b(H,{options:t(p),"onUpdate:value":h,"default-value":(n=f.value)==null?void 0:n.id,"label-field":"name","key-field":"id",key:m.value},null,8,["options","default-value"]))]}),_:1}),s(v,{path:"name",label:"\u6392\u5E8F\u53F7"},{default:r(()=>[s(L,{value:t(e).orderId,"onUpdate:value":_[4]||(_[4]=n=>t(e).orderId=n),class:"w-full"},null,8,["value"])]),_:1}),s(v,{path:"icon",label:"\u56FE\u6807"},{default:r(()=>[s(pe,{modelValue:t(e).icon,"onUpdate:modelValue":_[5]||(_[5]=n=>t(e).icon=n)},null,8,["modelValue"])]),_:1}),j("div",_e,[t(d).value===0?(c(),b($,{key:0,type:"success",onClick:O},{default:r(()=>[ie]),_:1})):t(d).value===1?(c(),b($,{key:1,type:"success",onClick:P},{default:r(()=>[ce]),_:1})):N("",!0)])]),_:1},8,["model","disabled"])}}});export{be as default};
